const real = `##.#..###.#####
###.#.##.#..##.
###.####.#..##.
##.#..###.#####
####......#####
#.#..##.#......
##.#.....#.####
......#........
.##..#..####..#
#...####.##....
.#.###..#......
##.#.#.#.#.#..#
..##.##..##.##.

#...###.#..#...
#....#...###..#
#.##.###..###..
#########.#.##.
.#..#.##.###...
.#..#.##.###...
#########.#.##.

#....#..#....##..
#..###..###..##..
.###..##..###..##
###..#..#..######
##....##....####.
.#.#..##..#.#..#.
..###.##.###....#
#..#..##.##..##..
####.#..#.#######
.####.##.####..##
####......#######

.##.##.##
...#..#..
.#.#..#.#
#..#..#..
#.#....#.
##.#..#.#
..##..##.
..######.
.#.#..#.#
##.#..#.#
###.#..##
#.#.##.#.
.#.####.#
..#.##.#.
..#.##.#.
.#.####.#
#.#.##.#.

..###.##.
..##.##..
...#.....
##.#.###.
..##.#.##
..##.....
..#...###
###...#.#
###...#.#
..#...###
..##..#..

.....##
.#..#..
..##...
..##...
.#..#..
##..###
..##...

.########..
###.##.####
#.#....#.##
###....####
.#..##..#..
##.#..#.###
..######...
#..#..#..#.
.#.####.#..

..##....##..###
.#.##..##.#...#
.#.##..##.#...#
..##....##..#.#
##..#..#..####.
.#.##..##.#..#.
#####..#####.#.
..###..###..##.
...#.##.#....#.
#..#.##.#..#...
#..##..##..####

.#..#...##.#.#.##
#..##..##.....##.
.#.#.#.####.##.##
..##.###.....####
..##.###.....####
.#.#.#.####.##.##
#..##..##.....##.
.#..#...##.#.#.##
##..#####...#####
#.##...##..#...##
#..####.#.#.###..
#..####.#.#.###..
#.##...##..#...##
##..#####...#####
.#..#..###.#.#.##

.#.#.#.##..##.#
.###.#.##..##.#
..###..#....#..
#.......####...
.#......####...
.....##.####.##
.#..#.###..###.
#####..######..
##..###..##..##

.#..####..#......
#.#######..##..##
.##.####.##......
#..##..##..#....#
.#..####..#.####.
..##.##.##.......
#..##..##..#....#

..#...###..##
..##....##...
#.#.#....####
##.###.#.##.#
##.###.#.##.#
#.#.#....####
.###....##...
..#...###..##
..#...###..##
.###....##...
#.#.#....####

#....#.
....#.#
...#...
...#...
....#.#
#....#.
##.#.#.
#.#.###
#.####.
#.#.#..
#.#.#..
#.####.
#.#.##.
##.#.#.
#....#.
....#.#
...#...

#.##..##.##.##.
.########..####
.#..##..#..#..#
.#..##..#..#..#
...#..#......#.
###.##.######.#
#.##..##.##.##.
#.##..##.##.##.
.###..###..###.
.########..####
.##....##..##..
####..########.
##.#.##.####.##

###..##
##.##.#
###.##.
.#.##.#
..##.#.
##.#..#
...#.#.
##.#...
###....
##..#..
#####.#
..#.#.#
..#.#.#

.##..#.##
.#..#.###
####.#.#.
#..###...
####.#...
....#.#..
.##.##.##
......##.
#####...#
.....#..#
.##.....#
.##...#..
#..###...
....#.##.
....#.##.
#..###...
.##...#..

####..#...#
###..#.##..
##.####..#.
...##.##...
##.#..##.#.
....##..##.
##..#......
..###.###..
..#.#####..
..#.##.##..
..###.###..
##..#......
....##..##.
##.#..##.#.
...##.##...
##.####..#.
###..#.##..

#.#.###..###.#.##
######....#######
.####.#..#.####..
#..###....###..##
#.#..........#.##
#.##.#.##.#.##.##
..##...##...##...
..####....####...
..#.##.##.##.#...
.#.##..##..##.#..
.#..#.####.#..#.#

...###....##.##
###.......##..#
##.#....##..#..
.#.####.#.##.##
#.##..##.....##
##.###....#.#.#
#..###....#.#.#
#.##..##.....##
.#.####.#.##.##
##.#....##..#..
###.......##..#
...###....##.##
.#.##..#....##.
#......##...##.
###..###...####
###..###...####
#......##...##.

..#..#...
#.####.##
.##..##..
#......##
#.#..#.##
##.##..##
..####...

.#..#..###.####.#
.#..#.##..#.##...
.####...#.#....#.
#....#...#..##..#
..##..##.........
##..#####........
#######..###..###

.##.#.#..
.##.###..
.......##
##.##.#..
.###.##..
#####..##
#.#..#...
##.######
.#.##.###

#.##.##.##.##.##.
..#.#..#.#....#.#
#..#....#..##..#.
#..##..##..##..##
####....########.
.####..####..####
..#.#..###....###

.#.##.#......
########..##.
.#.##.#.##..#
.######.##..#
##....##.....
.#.##.#..#..#
.######.##..#
#.#..#.#.####
#......#.....
...##...#....
.#....#......
..#..#...####
###..####.##.
.######.#....
..#.##..#....
.#.##.#.#.##.
#.#..#.###..#

#.#..#####.##.#
#.#.###.#######
...####...####.
...##.##..####.
#...#.#.#.#..#.
##..#...#.#..#.
##..#...#.#..#.
#...#.#.#.#..#.
...##.##..####.
...####...####.
#.#.###.#######
###..#####.##.#
####.##.##....#

#..#..#
.##.##.
..#.##.
###....
..#####
..#####
###....
..#.##.
.##.##.
#.##..#
.#.....
....##.
.#.....
####..#
.##....
.#.....
#.#.##.

###.####.
###.####.
#........
.###...#.
.######..
..#.#...#
..#.#...#
.######..
..##...#.

...#...
...##..
.#.#.##
....###
....##.
.....#.
.....#.
....##.
....###
.#.#.##
...##..
...#...
#.#.#..
#..##.#
.##.##.

....##.####..
.#..##.####..
..###.###..##
..##...###.##
#.##.#.#.#.##
.##...####...
..#.#...#...#
..#.#...#...#
.##...####...

#..##..
#..##..
##...##
..#...#
..#.##.
..#.##.
..#...#
##.#.##
#..##..

.....#.##.#....
.#.#...##...#.#
###.#.#..#.#.##
#.###......###.
.###...##...###
####.######.###
##..#..##..#..#
.#..#..##..#..#
#.#..######..#.
#.##..####..##.
###.#......#.##
##...######...#
.#...######...#
###.#......#.##
#.##..####..##.

###........
.####.##.##
.##...##...
.##...##...
.####.##.##
###........
.#......#..
..#..####..
..#.##..##.
#.##......#
.#####..###
..###.##.##
###.##..##.
..#...##...
#.###....##

##.....##.....#
####........###
..############.
..##...##...##.
..##.#....#.###
..#.#..##..#.#.
..##...##...##.
###.##....##.##
....##....##...
..#.###..###.#.
##.##..##..##.#
..#.##.##.##.#.
###..######..##
##.#.##..##.#.#
##.##########.#
####.#....#.###
#######..######

#.#.#...#..
#.#.#...#..
..###.#..#.
#.#.####...
##.###..###
.#.#.#.##.#
.##..#...#.
###.....#.#
##..#..##..
.#####...##
....#...#.#
....#...#.#
.#####..###

....#.#..#..#..
....####..##..#
....#...######.
####....#....#.
##..#..########
......#.#.##.#.
..##.###.#..#.#
..#.....#....#.
##..#.##....#.#

#......#...
##.##.###.#
..........#
###..#####.
########.#.
.#.##.##..#
..#..#....#
.##..##...#
#.####.#.##
#.####.#.##
.##..##...#

###.###.#....
..#####.##...
###..#.#.#..#
..#....#....#
..##...#....#
###..#.#.#..#
..#####.##...
###.###.#....
...##...#....
...#..#...##.
....##.....##
...#..#..#..#
###..###.#.#.
###.####..##.
##.#.#.#.###.

.##..#..##..#.#
..##....#.#..#.
..##....#.#..#.
.....#...#..#..
.##..##.###.###
.##..##.###.###
.....#...#..#..
..##....#.#..#.
..##....#.#..##
.##..#..##..#.#
#.#.#.#########
...#.#.#.#...##
...#.#.#.#...##

#.#...#..#.
..#.#..##..
##..#.####.
.####.####.
.##..#.##.#
###..#.##.#
.####.####.
##..#.####.
..#.#..##..
#.#...#..#.
###.##....#
##.#.#.##.#
.#.###....#
.#.##.####.
..#####..##
.#..##.##.#
.....##..##

##......#.#....#.
##.#...#.#..#.##.
...##.##.#.#.##.#
..#.####..###....
##.#....#.###.#.#
##.#..####..#.#..
####...##.##.####
##....#..#.....##
##....#..#.....##
####...#..##.####
##.#..####..#.#..
##.#....#.###.#.#
..#.####..###....
...##.##.#.#.##.#
##.#...#.#..#.##.

#..##.#......#.##
#####.#.####.#.##
#..###..###...###
.##..#.#.##.#.#..
#######.####.####
####.##......##.#
.........##......
....###..##..###.
.##.#.##.##.##.#.
......##....##...
#..##.########.##
.....#........#..
#######......####
....#.#......#.#.
#..##....##....##

###.##.##
###...##.
###...##.
###.##.##
...######
.##.###..
##...##.#
..##.....
##.####.#

######.....
..###..#..#
#.#........
####.......
#.##.#..#.#
..#####.#..
###...#...#
..#.##..##.
..#...#...#
..#.#.##...
##.#.#.##..
#.#.#.#####
#...#.#####
..#..#.##.#
..#..#.##.#
#...#.#####
#.#.#.#####

##.#.###.##...#.#
..#.#.###.....#.#
..#.#.###.....#.#
##.#.###.##.....#
##..##.#..#..#...
..#.##..##.#.#.##
##......##.#...##
##.###.....#...##
####.####..#.....
...###.#.##...#..
..#.#.#.#..#.##.#
...##..#....#.###
....#.#..#.#####.

#..#..#...###
.##..#.#.##..
.#.##.#####.#
#.##.##.##.##
#....#..##...
#....#..##...
#.##.##.##.##

#.##.##...#.#
#..#......###
#..#......###
#.##.##...#.#
#.#..#....#..
.##.#.####.##
.#.#.....###.
..#...#.##..#
####...##...#
.#..##.##..#.
.####.##...#.
.####.##...#.
.#..##.##..#.
####...##...#
..#...#.##..#
##.#.....###.
.##.#.####.##

..####.
#..####
..#....
..#....
#..####
..####.
.##...#
..####.
..####.
.##...#
..#####
#..####
..#....

##....##.##....
#.#.#.##....#.#
#.#.#.##....#.#
#.....##.##....
.#.####..##.#.#
####.###..#.#..
####.#...#.####
##.....##...###
.#..#.##....###
.#..#.##....###
##.....##...###

#######.##.##
##...#......#
..#.##.####.#
...#....##...
#####..###...
....##.#..#.#
...####....##
######......#
##.#.#..##..#
..##...#..#..
..#...##..##.

#####..##
##.#....#
...######
....#..#.
###.#..#.
#....##..
..#.####.
..#.#..#.
##.##..##
..###..##
.....##..

##....##..#.###
..#.##......##.
...##...##.#..#
.######..###.#.
.#....#..#.#...
.#....#..#.#...
.######..###.#.

##.#...
####...
..#.###
##.##.#
####...
..##.#.
###..#.
....#.#
####.#.
##.#.#.
##..###

.###..#######.###
....##.##.###....
#...#.##.###.....
#.#.###.....#####
...###..##.#.##..
......#...#..##..
......#...#..##..
...###..##.#.##..
#.#.###....######
#...#.##.###.....
....##.##.###....

#.##.#.##...#
..##.....###.
..##.....###.
#.##.#.##...#
...###...#..#
##.##.#.#####
.##.###...##.
###.####.###.
###.####.#.#.
.##.###...##.
##.##.#.#####

....#......#..###
..#.##....##.##.#
#..#..#.##....#..
.##..#.#..##.#...
#..#..#.#...#....
....#...#####.#..
####.#.##.#.####.
####.#.##.#.####.
....#...#####.#..

.#.##.###..##..
#####..########
##.##..#..#####
##.##..#..#####
######.########
.#.##.###..##..
...#.##.#.###..
.##...#......##
#..##....#.##..

######...#.#.
######...#.#.
##..##..##.#.
.###.#.##...#
.##.....##.#.
#..###..###.#
..#.###.#..#.
..#.###..####
..#.###.#####

.#...#.##.#....
.##..#.##.#....
##...#..####.#.
.#..#...######.
.......####..##
...#......#####
#...##.######..
###.###..#.#..#
####.##.###.#.#
.##.###.#..#..#
#.#.#...##....#
##.....##.####.
##.....##.####.
#.#.#...##....#
.##.###.#..#..#
####.##.###.#.#
###.###..#.#..#

..##.##
##..###
##.#.#.
...###.
..#.##.
..#.###
###....
##.####
....###
..##..#
..##..#
....###
##..###
###....
..#.###

..#####
##.##..
..##...
..##...
##.##..
..#####
#.#..#.
#.#..#.
..#####
##.##..
..##.#.

....#..
#..##.#
.##.#..
.##..#.
####...
#..###.
#..##..
##.#...
.##..#.
.##.###
#####..
#####.#
####...
.##..##
.##..##
####...
#####.#

.####..#.
#...#.##.
##.#####.
##.#####.
#...#.##.
.####..#.
####.#...
...####..
.#...##..
.##...#.#
#......##
###..####
#..##....
##.#....#
##......#

....##....##.
#..#.#.##.#.#
#####.####.##
....#..##..#.
#..#........#
#..##.......#
....##.##.##.
....########.
#..#..#..#..#
#..#.#.##.#.#
#..####..####
....##....##.
....#.#..#.#.
#..##########
.##.########.
####..#..#..#
.##..######..

....##..#.#.###
.#.##.####.#.##
.##.##..##.##.#
####.####.#..#.
####.#.#.#.#.#.
.#.....####.##.
.#.....####.##.
####...#.#.#.#.
####.####.#..#.
.##.##..##.##.#
.#.##.####.#.##
....##..#.#.###
....##..#.#.###

#........##
.#.#..#.#..
###.....##.
#..####..##
#...##...#.
..##..##...
..##..##...

###..##...#..##.#
###..##.#.#..##.#
###..##.#.#..##.#
###..##...#..##.#
##.##.##..##.#..#
#.##.##..#####.#.
..#..#.##...#...#
#...##..##.#....#
#......###.#.####

.#...#..##..###
.#...#..##..###
#...##..#...##.
.#..#...#......
..###.##..#.#..
#########..##..
##....#...##.##
.#....#.######.
.##..#..#.#....
.##.....#.#....
.#....#.######.
##....#...##.##
#########..##..

.###.###...
####.###...
.##...###.#
.######.#.#
.#..#..##..
###.##.###.
.#....##.#.
##.#.#....#
#.#..#..##.
.#.#..##..#
.#.#.#.##.#
###.#..##.#
###.#..##.#
.#.#.#.##.#
.#.#..##..#
#.#..#..##.
##.#.#....#

.#.##....
.##.##...
.###.#...
.##...###
......###
..#...###
.##...###
.###.#...
.##.##...
.#.##....
.########
##.#..###
##...####

#.###..
#....#.
.....#.
.#.#.##
.#.#.##
.....#.
#....#.

...##.#.#..#.##
....#..#..####.
#.#.##...##....
##.##.......##.
.##.#..#..##..#
.##.#..#..##..#
##.##.......##.
#.#.##...##....
.......#..####.
...##.#.#..#.##
...##.#.#..#.##

######.....
##..##.#..#
##..##.##..
#######.#.#
......##..#
######..###
..##..#.##.
.#..#.#...#
......####.
##..##.####
#....#..###
#....#...##
##..##.####

##.#..#..
#.....##.
#.#.#.##.
.####.##.
...#.....
..##.####
..##.####
...#.....
.####.##.
#.#.#.##.
#.....##.

#.#####
####...
#.#####
#.#.###
..###..
.###.##
#.#..##
.##....
.###.##
.##.###
#..#...
#...##.
##..###
...#.##
...#.##

...#..##.#.##.#
#..#.#..#......
.#.##.##.##..##
##..##.#.##..##
#.#.#..#..####.
.#.#..####..#.#
#.#...#.#.#..#.
.#.....###....#
.##.##.###....#
.##.#.....#..#.
.#.#.#####....#
####.#...#.##.#
..##.......##..
...#.######..##
...#.######..##

.##.###.####.
.....###.....
....#..##.##.
....#..##.##.
.....###.....
.##.###.####.
#.##..##.#..#

#..##......##..
######.........
#######........
#..##......##..
#..##.###.....#
####....###...#
.##.##.####....
....#####...##.
....#...###....
#..##.#...##...
######...#.##.#

##.##......#.
..#.##.....#.
###.#..######
..##.###.#.#.
...######..##
...######..##
...#.###.#.#.
###.#..######
..#.##.....#.
##.##......#.
..#.......#..
##....#......
##.#.#.#.....
####.###..###
..###..#.###.

#####..
..###..
.#.##..
#...###
####...
.##.#..
####.##
#...###
.....##
.##.###
#...###
###.#..
.#..###
.#..###
##..#..

....########.....
#..##..##..##..##
#...###..###...##
#..#........#..##
##.##.####.##.###
..##.#....#.##...
#.#.###..###.#.##
#..###....###..##
#.###.#..#.######
#####......######
.......##........
#..#.#....#.#..##
##..#.#..#.#..###
###.##.##.##.####
.#..#.####.#..#..

....##.
.#.#..#
...#..#
##.#..#
....##.
...#..#
..#....
#..####
#..####
.##....
...#..#
....##.
##.#..#

.....#..#....
####..####..#
.##.#########
#..#.#..#...#
.....###.####
.##...#...##.
#####.#.#.##.
.##.##.##.##.
####..#......
####.#.##....
......#..#..#
....#.#.#####
........#.##.

.##.###.....###..
.##.###.....###..
#..##.#.#.#.##.#.
####.##.#.#..#.#.
.##....#..#####..
#..#..#.######.#.
....#.##..###..#.
####..#.#.......#
####.#.##..#.##..
.###.####...#....
.##....####......
.....###..#.##.##
.##.#.#..#.#####.
#..#..#.##...#.##
#..#.#...##.###.#
.##.#..##..#.##..
#..###...##.###.#

##......##..#..
.#...#..##.##..
#.##...#####...
#.##...#####...
.#...#..##.##..
##......##..#..
.#.###.#..#.#.#
#.#...#...#.##.
#.#...#...#.##.
.#.###.#..#.#.#
##......##.....

..#.####.#..#..
###.#.##...####
##.#...#...#.##
#...#.####.....
#...#.###......
##.#...#...#.##
###.#.##...####
####..###...###
##.####..##..#.
##.####..##..#.
####..###...###
###.#.##...####
##.#...#...#.##
#...#.###......
#...#.####.....
##.#...#...#.##
###.#.##...####

.##.#.##..#.###
.##.#..#.#####.
#..##....#..##.
####..#...##...
.##...#.###.##.
#..#.####.#..#.
#..##..##.#.##.
#..##..##.#.##.
#..#.####.#..#.
.##...#.#.#.##.
####..#...##...

..#...#..##..
####..#.####.
..##.#.......
#######.#..#.
#...#..##..##
#.##.####..##
##.#..#..##..
##.#..#..##..
#.##.####..##
#...#..##..##
###.###.#..#.

.#.#.##.#
.#.#.##..
##..#....
#.#..#..#
.###....#
.##..##..
####.#..#
#....##..
##..###..
#....#.##
####.##..
....#.###
#.#..####
#..#.....
#..#.....

...#....#.#.#
...#....#.#.#
..#.#.#..##..
###.#.....##.
###...#.#..#.
###..##.###..
##.###.##...#
##.####..##..
...#.###.###.
..#.#.####...
.#.####.#....
..#..###.#...
...#####.....

######...##
###.##.###.
##.##..#.#.
##.##..#.#.
###.##.###.
####.#...##
.....###...

..##.#...##
..#..##..#.
#..#####...
..#..#.#.#.
#...#.###..
.#....#.##.
##..#.#####
...#.#...#.
...#.#.....
##..#.#####
.#....#.##.
#...#.###..
..#..#.#.#.
#..#####...
..#..##..#.
..##.#...##
..##.#...##

....###
..##.##
##...##
##.#.#.
....#..
..####.
..##.#.
....#..
##.#.#.
##...##
..##.##
....###
....##.
.#....#
.##.##.
.##.##.
.#....#

....########...
##..#..##..#..#
#####......####
..##.#.##.#.##.
..#.#..##..#.#.
###.########.##
##..#.######..#
##..#......#..#
..##........##.
##.####..####.#
###.###..###.##
####.#.##.#.###
###..........##
####..#..#..###
##.###.##.###.#

..##..##.
####..###
###....##
...####..
########.
....##...
...#..#..
....##...
###.##.##
##.####.#
..#.##.#.
...####..
....##...
..######.
..#....#.

....##.##
....##.##
.####....
#..#.##..
##.##...#
#####.#..
..####..#
..#....##
........#
........#
..#....#.

....##.......##
###.##...#.#.#.
###.#..#..####.
####..#.......#
###.##..#..#.#.
###..#.##.#.###
..#.#..##.###..
##.#####..#####
###.###...#.#.#
..###.##...##.#
..#....###..##.
#####.#....#..#
##.#...######..
##.#...######..
#####.#..#.#..#

.#..#.##.##
#.#......#.
...#.###.##
...#.###.##
#.#......#.
.#..#.##.##
#####.##.##
....#####..
###...#..##
#.#..##..#.
.#.######.#
##.##.####.
#.#####..##
##.####.###
##..#.#.##.
##....#.##.
##.####.###

..####..#..
###..####..
##....##.##
.##..##.###
#.#..#.####
###.#######
#......##..
#.####.####
##.##.##...
##....##...
#.####.####

##..#.######..##.
.###..##...#.#..#
#.#..#..##.#..#.#
####.#..###..##..
......##.########
......##.###.####
####.#..###..##..
#.#..#..##.#..#.#
.###..##...#.#..#
##..#.######..##.
##..#.######..##.

#....####.##.####
.##.###...##...##
#..#....######...
#####..#.####.#..
.##.#..#.#..#.#..
#..###.##....##.#
#..##...#.##.#...
#..#...###..###..
.##.#..#.#..#.#..
.##.##....##....#
#..##.###....###.`;
const test = `#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#`;

function format(input: string) {
  const patterns = input.split("\n\n");
  return patterns.map((p) => p.split("\n"));
}

function part1(input: string) {
  console.time("part1");
  let result = 0;

  const data = format(input);

  for (const pattern of data) {
    let found = false;
    pattern.forEach((line, row) => {
      if (row < pattern.length - 1 && line === pattern[row + 1]) {
        found = true;
        for (let j = 1; j <= pattern.length; j++) {
          const top = row - j;
          const bottom = row + j + 1;
          if (top >= 0 && bottom < pattern.length) {
            if (pattern[top] !== pattern[bottom]) {
              found = false;
              break;
            }
          }
        }

        if (found) {
          result += 100 * (row + 1);
          return;
        }
      }
    });

    if (found) {
      continue;
    }

    for (let col = 0; col < pattern[0].length - 1; col++) {
      if (pattern.every((line) => line.charAt(col) === line.charAt(col + 1))) {
        found = true;
        for (let j = 1; j <= pattern[0].length; j++) {
          const left = col - j;
          const right = col + j + 1;
          if (left >= 0 && right < pattern[0].length) {
            if (
              pattern.some((line) => line.charAt(left) !== line.charAt(right))
            ) {
              found = false;
              break;
            }
          }
        }

        if (found) {
          result += col + 1;
          break;
        }
      }
    }
  }

  console.log(result);
  console.timeEnd("part1");
}

function part2(input: string) {
  console.time("part2");
  let result = 0;

  const data = format(input);

  const oldMap: Array<["h" | "v", number]> = [];

  for (const pattern of data) {
    let found = false;
    pattern.forEach((line, row) => {
      if (row < pattern.length - 1 && line === pattern[row + 1]) {
        found = true;
        for (let j = 1; j <= pattern.length; j++) {
          const top = row - j;
          const bottom = row + j + 1;
          if (top >= 0 && bottom < pattern.length) {
            if (pattern[top] !== pattern[bottom]) {
              found = false;
              break;
            }
          }
        }

        if (found) {
          oldMap.push(["h", row]);
          return;
        }
      }
    });

    if (found) {
      continue;
    }

    for (let col = 0; col < pattern[0].length - 1; col++) {
      if (pattern.every((line) => line.charAt(col) === line.charAt(col + 1))) {
        found = true;
        for (let j = 1; j <= pattern[0].length; j++) {
          const left = col - j;
          const right = col + j + 1;
          if (left >= 0 && right < pattern[0].length) {
            if (
              pattern.some((line) => line.charAt(left) !== line.charAt(right))
            ) {
              found = false;
              break;
            }
          }
        }

        if (found) {
          oldMap.push(["v", col]);
          break;
        }
      }
    }
  }

  data.forEach((pattern, patternIndex) => {
    let found = false;
    let cleared = false;

    pattern.forEach((line, row) => {
      if (!found && row < pattern.length - 1) {
        cleared = false;
        const diffs = line.split("").map((c, i) =>
          c !== pattern[row + 1].charAt(i)
        ).filter((e) => !!e);
        if (diffs.length > 1) return;
        if (diffs.length === 1) cleared = true;
        found = true;
        for (let j = 1; j <= pattern.length; j++) {
          const top = row - j;
          const bottom = row + j + 1;
          if (top >= 0 && bottom < pattern.length) {
            const subDiffs = pattern[top].split("").map((c, i) =>
              c !== pattern[bottom].charAt(i)
            ).filter((e) => !!e);
            if (subDiffs.length > 1 || (subDiffs.length === 1 && cleared)) {
              found = false;
              break;
            }
            if (subDiffs.length === 1) cleared = true;
          }
        }

        if (
          found &&
          (oldMap[patternIndex][0] !== "h" || oldMap[patternIndex][1] !== row)
        ) {
          result += 100 * (row + 1);
        } else {
          found = false;
        }
      }
    });

    if (found) {
      return;
    }

    for (let col = 0; col < pattern[0].length - 1; col++) {
      found = false;
      cleared = false;

      const curColumn = pattern.map((e) => e.charAt(col));
      const nextColumn = pattern.map((e) => e.charAt(col + 1));

      const diffs = curColumn.map((c, i) => c !== nextColumn[i]).filter((e) =>
        !!e
      );
      if (diffs.length > 1) continue;
      if (diffs.length === 1) cleared = true;

      found = true;
      for (let j = 1; j <= pattern[0].length; j++) {
        const left = col - j;
        const right = col + j + 1;
        if (left >= 0 && right < pattern[0].length) {
          const leftColumn = pattern.map((e) => e.charAt(left));
          const rightColumn = pattern.map((e) => e.charAt(right));

          const subDiffs = leftColumn.map((c, i) => c !== rightColumn[i])
            .filter((
              e,
            ) => !!e);
          if (subDiffs.length > 1 || (subDiffs.length === 1 && cleared)) {
            found = false;
            break;
          }
          if (subDiffs.length === 1) cleared = true;
        }
      }

      if (
        found &&
        (oldMap[patternIndex][0] !== "v" || oldMap[patternIndex][1] !== col)
      ) {
        result += col + 1;
        break;
      }
    }
  });

  console.log(result);
  console.timeEnd("part2");
}

part1(test);
part1(real);
part2(test);
part2(real);
