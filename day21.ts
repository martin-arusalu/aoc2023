const real =
  `...................................................................................................................................
....#....#..#.#..........#..#...................#..#..#..................................#........#..#.......#.#.................#.
.................................#.#...#.##................#.........................#.....#...#.....#..#....#..#...............#..
.............................#.#.##..#..........#........................#.....#...#..#.........#...#......#...............#...##..
............#........##.#......#....#...............#..............................#......#.##...#.....#........#.......#..........
.#.......#...###............#...##...#............................#.........#.#...#.....#.......#..##.............#.....#.#....#...
........#.....................#........#.......#......#.........#.............##......#.....................#..#.......#.......#.#.
....#.............#.....#...#..........#.....#..#.......................................##.................#............##......#..
..............#........##.........#............#.............#.....#.#.............#..............#.....#...................#......
..###...#..................#..#...#...#..#....#.....................#.#.........#.............#....#.#..##............#............
..#...#..............##....#..#...........#..#...............#.#....#............#...................#.#....#....#..##.............
............#..#.............#...#......#..##..#............###...#....#...........#..#............#...##.##..#........#...........
..#.###.....#.......##..........#.##......................#.#...#.#.................#.#..#...#......................#........#.....
........#............#...........#..#......#....................#.....#...#...........#.#..................#..#..##.........#......
....#...#..#..........##.....#....#..#....#...#........#.....#......#......#..........#......#........................##....#......
..#.#...#.##............................#....#........................................#.......#..#........#......#.....#...#.....#.
.........................#.......#.......#.............#.............#...#..............#....#......................#.......#......
.....##..................#......#......#.#.#....................#....##.......#.................#........#..##...............#.....
.#....#.......#.................#...................#...#.........##........#.................#.##.........#......#...#...#.....#..
................#.............##....#.......................##..#...............#............#........#.....#..#.#....#..#......#..
......#.......##...#......##........................#........#........#.....#............##....#.##........#.......................
....#..#.....#.#.........#....#......#..........#....#....#..#....#.....#...#....#...........###...##......##......##.......#......
.#........#...#........#.............#..........#...#..#.......#...#....#...........................#.#..#....#...#..#......#..#...
....###..#....#.#..................#...............#.##......##..........#..........#..........#....#...#.......#..#.............#.
...##.#.................#......#.#...........#..#.......#.#...#......#..#..........##.................#..#.#..#............#..#....
......#.......#...........#..#...#................#....#...#...........#...............................#...#....#.......#...#....#.
...#.#.#.........##......#....#....#..........#...#.##.##.......#..##..............................#......#.........###.....#......
...#.....##.##..#.#............##....................................#.#.................................#.............#....#......
............#............#..#.............#........#.......#.......##.#..#.....#......#.......................#.......#............
....#.........#.....#....................##..........................#...........#.....#.#..........#........#.#...................
.....##....#..##.....#........................#..#....#................#.##.#.........#................#...........................
................#...#.......##.......................#.#..............#........#...#.......................................##......
.#...#..##....#.....#.#......#........###.........##..#........#......#.....#........................#.##..#......#..........#.....
......#.#................#...........#......#..##..........#.......................#..................##...........#.........###...
...##.............##.......#..................#....#.#..#.#.#..................#.#..###.#..##..................#..##.....#.........
..#..#.#....#.#.#.#.#.....#.......#..#..#.##...#....#.....##.#.#..#..#....#...........#.##..................#......#...#.......#...
.....#................#...................#.....#..#..#...#.....#..................#......................#...............#.....#..
.#..............#.#..............#..............#.......#...#.......#...............#.#....................#..........#....#...#...
.........##.##.......#.............###................#...#..#.#....#.#..#..........#.#.#....#...#............#....................
...................#..#.......#..##....#........#....#..#.........#..........#..#.....#.#................................###....##.
.....................#..............##..#..#..................#..............#.........#.....#.#..............##.......#...........
..#.......#.##................#......#.....#.......#..............#.........#...........#.......#........................#.#.....#.
.#..............#...........................#...#.##...........#.......##........#........#......#..#.#..........#............#....
...#.#..#.#.#..................#....#...#................#.#.#.#.......#.....................#........................#............
...............................#.........#..........#...................##..#..#....#.##.......#...##...#.............#........#...
....#.......##..................#...##....#.......#...#..#..#......#.#......#...................#..............................#...
..........#...#.............#..##.........#............................#..##......###......#........#...#..............##.#........
...#.....#.............#.#......#.............#.#.......##........#....##...................#.........#.............##....##.......
.##........#...........#..........#..........##...............#............#..#..#........#..#.......#..#.............#............
..........................#....#......#.......#..#.....#.#.#........#................##......#.#.#..##..................#......#...
.#.###.#................#..#..............##...#........#.#.........#....##........#...................................##..........
....#.#...........#.................#..#.................#.....##........##..........................##.....#......................
...................#.......###.....................#......#.......#...##..........#...........#.........#...#.#.#..................
.....................#..#.....#........................#.............#...................#........###.##........................#..
......#.............#..................###...##...........#...#..........#................##..............##................##.....
...................#.......#.................#.#...#.....#.#...#.....#.#....#......#.....#..#...#..#...#.##...#................#.#.
.##..............#..#...#....................................#........#....#.#.#...#...#.....#................................#..#.
...#.................#......#..#...#...###.#..##....................#...........#..###..#.#...#.....#.##.#.....................#...
..................#.#..........###........#..#.#........................................................#.......#.#..##........#.#.
.......................#......#..#.#......#...#.........#....#..#...#..#........#...#..#...........#...............................
...............#...............#..#..#....#..##.....#........#..#...................#.#.........#...........#.....#...#..........#.
.....................#...................#.....#...#....#...........#...................##.......##....#.....##...#................
..............##...#..#...#....#..#......#.......#......#..#.................................#..#...#...##..........#......#.......
................###...................#..#...........#......#.#.#.....#...........#.#.#....#...............#.........##............
.....#............#.......#.......#......#..............#...............#.#..............#..........##....#...##......#....##......
.................................................................S.................................................................
.........#.......#......#..##................#......#.............#.###.............#..#...#......#...........#......#....##.......
..........#......##.#......#...#........#...........#..............#...##..#.........##.........#....#...#.........................
......................#....#......#..#.....#..#...........#....#..#...#........#.#...........###.........#..#.##..#..#.............
........#.#..............#.#.........#.....##..#.......#...........#............#.....#......#.#.......#....#.......###............
.............#......#...##..#...........#...........................#.#...#..#....##.........#.#.#.............#........#........#.
..#.......#..#..#..#...............#.#..#.#........#...#...........#...#.#...#........................#.....#.......#.#............
.....................................#..#...#....#..#....#.....#..#.#...#.................#...#.#..#.#.....##....................#.
.#.................................#...#...#.....#.##..............##.........#........#...........##......#..#..................#.
.....#........#................#......#.#.......................#.....#.........#......#.......#................#............##.#..
...#.....................#.#.....#..#........#..#..#...##....#..............##.......##........#......#...###.................#..#.
......#...........#.......#.......................#....#....#.....#..##....#...##......#.........#.........#.#.#...#.........#...#.
..................##........#....#.#.#......#....#..#.#.....#......#........................#....##..........................#.....
.....#..#..............#..##.........##.....#................#.##......#.....#...............#..#.##......#...#.#..................
...#................#.........##......#.#...#.....#....#...#....#.............#..#.............................#........#..........
.###..#.............#.......##..............##..............................#...............#.....#.....#....#.....................
......#.............................................####..........#.............#.....................##................#...#....#.
......#...#..#.......#..#....#........#.......##..#................#.......#..#..#......#.#..#......##......................#......
........##...............#.....#.....##..##........###........................#.#......#...#.....#........#..........###.......#...
..................................##..........#.........#....#.....#........#......#.......#....#...#..............................
..#......#................#..........#...#.#.#..........##...#....#...........................#.....#..............#.#.........#...
.....#......#....#...............#.....#........#.#......#..#..............#.#..........##............###.............#...#......#.
......#...........#.......#.....................##.#..#..#...........#......#........##.......##.#..#...............##..#..........
...#........................#........#.......#..#......#...#...#..#......................#...#.#....#..................##.#.#....#.
...#.#..#.....#....#.........##....#..#..#.....##.#......................................#.#...................#.........#.#...#...
............#.#......#.........#..........##....#...................#...#.....................................#....#.........#.....
.#.........#.#................#..............#.......#...............#..........#....#..#.....#....#...............#.#...........#.
....#.....#.....#.#..................##...#.###.............#..#................................................#.....#..##........
....#.....#....#.....#...........#.....##........#...#.....#....#..#..#...................................#........#.......#.#.....
..##....#...........#..#............#................#......#.....#...........#..........#.......#........#.............#..........
........#..#.......#.....#....................##...............#............#....#......#................#.#....##..#.#......#...#.
........#.#..#..........#................#......#..........#......#..#.#....#...#.........#..............................#.........
....#.....#..#...#..#.#..#...........#..#.#.#.###....#.#...........##........#.........#.#...............#.#.......................
........#........#....#..................#...........#..............##.........#.#...................#.........#.............#...#.
.##..........#.......#.#..............##..............#......#....#.............#.........#.#..........#...#.#........#............
....#....#........#......#................#...##...#..............#.................#.#............#.............#......#.......#..
...#...........#...#...........................#....#......#.####.......#.....#.........#...........#..#..#...##.#.......#.........
................#....##..#.#.#.#...............#.......###..#................#...................###.......#...###.#.#......#......
....#.#..#..#.......#.........#.............#..##........#..........#.....#..................................####...#..#...##......
......#.#........#..##.............#..........#.........#.#.##......#............................#....#.................##.#.......
.#.....#...#.......#.#........................#..#.#.........##............#....................#.##..#........#........#..#.......
.......#..#...#.....#...........#............#....#.#.#................#.........#...............#..##.............#....#....##..#.
......#.....##...##.#.........#...#...#.......#....#...#..#..##.#...................#..............##.......#....................#.
....#.......................#........#.#..........#....#.##.#.........#............#............#..........#.........#...##........
.#.....................#.........#..#..............#......#...#.....#........##...#.........#.#...........#.....#.............#....
.#.##.....#..#...........#..#.#....................................#...#......#...........#...#...#.........#....#........#........
...............#.#...#...............#.#............##...#.........#....#..#........................#........#....#....#...........
....#....#.....................#....#..#...............#.....#..................................#.....#...........#..#...........#.
............##.......................#................#...#.#.........#..#...#..........#..............#.#..#.......#..............
.##........................#........#..#..##..............#.........#......#.........##...............#.#......#......#............
.....##....#....#....#...#..#.#.#...#..#.#.##.#.......................#..............#.....#.#....................#....#......#....
..........#.#...##........#..#...#.........#..................#.#.....#....#..........#.........#....#.#....#.....##.#.#.......#...
..................................#...#....##..............##.....................#.#.#.#.........##.......##..#.....#...#....#....
..................#..........#........#........#..............#.#....#.##.........#.......##....##.........##.....#....##...#....#.
.............#...............#.#...........................#........#...#.......##..##......................#.#..#.....#..#........
..............##....................................................#.............#.............#....#..#..#.#.#...................
......#...#............#...........#..#..............................#..........#.......#....#..#...###.#........#....#.#..........
...##....#........#...#.#..#.........#.#........#.................................#........#....#....#.......#.....................
.........#..#.........#....#..........#..#...........#................................##...........................#......#....#...
.#...#.........#....#....#..#.#........................#........#.#..........#....###..#................#.#.....#..............#...
...........................#.......#......#...#...#...##.........................#...##...#.......#..........#..................#..
.......#....#.....#.........#....#..#.......#........##....................#...........#..............#...............#............
....#...........##......#....#...#..........#....#........................#.....#.........##.......#............#.......#..........
.....#.........#............####.....#............#.#.#..................#....##..#...#....#...............#..........#............
.................#...#........#....#..#...#.........#.......#..........##....#.....#..........#...#..#.....#......#.......#..##..#.
...................................................................................................................................`;
const test = `...........
.....###.#.
.###.##..#.
..#.#...#..
....#.#....
.##..S####.
.##..#...#.
.......##..
.##.#.####.
.##..##.##.
...........`;

function format(input: string) {
  return input.split("\n");
}

function part1(input: string, maxSteps: number) {
  console.time("part1");
  let result = 0;

  const data = format(input);

  const finalOnes = new Set<string>();
  const visited: string[] = [];
  const plots = [".", "S"];

  function doStep(pos: [number, number], step: number) {
    const [row, col] = pos;
    if (visited.includes(`${row};${col};${step}`)) return;
    // max reached
    if (step === maxSteps) {
      finalOnes.add(pos.join(";"));
      return;
    }

    // up
    if (row > 0 && plots.includes(data[row - 1].charAt(col))) {
      doStep([row - 1, col], step + 1);
    }
    // down
    if (row < data.length - 1 && plots.includes(data[row + 1].charAt(col))) {
      doStep([row + 1, col], step + 1);
    }
    // right
    if (
      col < data[row].length - 1 && plots.includes(data[row].charAt(col + 1))
    ) {
      doStep([row, col + 1], step + 1);
    }
    // left
    if (row > 0 && plots.includes(data[row].charAt(col - 1))) {
      doStep([row, col - 1], step + 1);
    }

    visited.push(`${row};${col};${step}`);
  }

  let start: [number, number] = [0, 0];
  for (let row = 0; row < data.length; row++) {
    for (let col = 0; col < data[row].length; col++) {
      if (data[row].charAt(col) === "S") {
        start = [row, col];
      }
    }
  }

  doStep(start, 0);

  result = finalOnes.size;

  console.log(result);
  console.timeEnd("part1");
}

function part2(input: string, maxSteps: number) {
  console.time("part2");
  let result = 0;

  const data = format(input);

  console.log(result);
  console.timeEnd("part2");
}

// part1(test, 6);
part1(real, 64);
// part2(test);
// part2(real);
